<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>Mapping Tuscaloosa</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css' rel='stylesheet' />
<style>
body {
  margin: 0;
  padding: 0;
  font-family: 'Montserrat', Montserrat, Sans-serif;
}
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}
h1 {
  font-size: 20px;
  line-height: 30px;
}
h2 {
  font-size: 14px;
  line-height: 20px;
  margin-bottom: 10px;
}
a {
  text-decoration: none;
  color: #2dc4b2;
}
#console {
  position: absolute;
  width: 240px;
  margin: 10px;
  padding: 10px 20px;
  background-color: white;
}
</style>
</head>
<body>
<div id='map'></div>
<div id='console'>
  <h1>Property Values in Downtown Tuscaloosa</h1>
<div class='session' id='sliderbar'>
  <h2>Year: <label id='active-year'>1958</label></h2>
  <input id='slider' type='range' min='1958' max='1977' step='1' value='1958' />
</div>
<div class='session'>
  <h2>Ownership sorted by:</h2>
  <div class='row' id='filters'>
    <input id='gender' type='radio' name='toggle' value='gender'>
    <label for='gender'>Gender</label>
    <input id='race' type='radio' name='toggle' value='race'>
    <label for='race'>Race</label>
  </div>
</div>
</div>
<script>
  
mapboxgl.accessToken = 'pk.eyJ1Ijoicmxncmllc2JhY2giLCJhIjoiY2pkbzAwenR2MGgybjJ4cGs5MnIxd3BydiJ9.zep_0WZyBoN8SOfiWmT0bA';
var map = new mapboxgl.Map({
  container: 'map', // container element id
  style: 'mapbox://styles/rlgriesbach/cjunhxs0yayo01flpptif9o51',
  center: [-87.563,33.208], // initial map center in [lon, lat]
  zoom: 15.42
});
  
map.addControl(new mapboxgl.NavigationControl());
map.on('load', function () {
  map.addLayer({
    "id": "gender",
    "type": "circle",
    "source": {
      "type": "geojson",
      "data": "gender.geojson"
    },
    paint: {
      "circle-radius": [
          "interpolate",
          ["linear"],
          ["get", "Property Values"],
          0,
          0,
          15200,
          5,
          31455,
          8,
          47710,
          10,
          80220,
          15
        ],
        "circle-color": [
          "match",
          ["get", "Gender"],
          "Female", "#DB43D3",
          "Male", "#0DB9F2",
          "M/F", "hsl(273, 100%, 61%)",
          "#BFBFBF"
        ],
    }
  });
  
  document.getElementById('slider').addEventListener('input', function(e) {
    var year = parseInt(e.target.value);
    // update the map
    map.setFilter('gender', ['==', ['number', ['get', 'Year']], year]);
    document.getElementById('active-year').innerText = year;
  });  
  document.getElementById('filters').addEventListener('change', function(e) {
  var owner = e.target.value;
  // update the map filter
  if (owner === 'gender') {
    filterOwner = ['match', ['get', 'gender'];
  } else if (owner === 'race') {
    filterOwner = ['match', ['get', 'race'];
  } else {
    console.log('error');
  }
  map.setFilter('ownership', ['gender', filterOwner]);
});
});
</script>
</body>
</html>
